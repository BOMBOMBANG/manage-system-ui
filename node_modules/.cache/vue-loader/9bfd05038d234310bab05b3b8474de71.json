{"remainingRequest":"D:\\working\\manage-system-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\manage-system-ui\\src\\components\\meau\\systemMeau.vue?vue&type=style&index=0&id=5d3ae3de&lang=scss&scoped=true&","dependencies":[{"path":"D:\\working\\manage-system-ui\\src\\components\\meau\\systemMeau.vue","mtime":1560739976949},{"path":"D:\\working\\manage-system-ui\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\working\\manage-system-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\working\\manage-system-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\working\\manage-system-ui\\node_modules\\sass-loader\\lib\\loader.js","mtime":1533139052000},{"path":"D:\\working\\manage-system-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\manage-system-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import \"../../styles/index\";\r\n.nav{\r\n  background: #334154;\r\n  position: relative;\r\n  height: 100%\r\n  // border-right: 2px #dddddd solid;\r\n}\r\n.navgtion_min{\r\n}\r\n\r\n.logo{\r\n  transition: 0.2s;\r\n  height: 50px;\r\n  @include flex();\r\n  max-width: 180px;\r\n  font-size: $font-size-mid;\r\n  font-weight: $font-weight-large;\r\n  overflow: hidden;\r\n  img{\r\n    width: 30px;\r\n    height: 30px;\r\n  }\r\n  p{\r\n    transition: 0.2s;\r\n    // width: 100px;\r\n    color: #ffffff;\r\n    font-size: 16px;\r\n    @include ellipsis;\r\n  }\r\n  .keyan{\r\n    // position: absolute;\r\n    width: 0;\r\n    // transform: scale(0);\r\n    overflow: hidden;\r\n  }\r\n}\r\n.form{\r\n  @include flex;\r\n  flex-direction: column;\r\n  align-content: flex-start;\r\n  align-items: flex-start;\r\n  &-item{\r\n    width: 100%;\r\n    @include flex\r\n  }\r\n}\r\n\r\n.el-menu-vertical-demo{\r\n  position: relative;\r\n  height: 100%;\r\n  background: rgba(0,0,0,0);\r\n  border: #334154 0px solid;\r\n}\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 210px;\r\n}\r\n.icon{\r\n  font-size: 20px;\r\n  margin: 5px;\r\n}\r\n",{"version":3,"sources":["systemMeau.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"systemMeau.vue","sourceRoot":"src/components/meau","sourcesContent":["<template>\r\n<nav class=\"nav\" id=\"modal-step-nav\">\r\n  <div class=\"logo\">\r\n    <img :src=\"logo\">\r\n    <p :class=\"{'keyan': isCollapse}\">管理系统</p>\r\n  </div>\r\n  <el-menu\r\n    unique-opened\r\n    show-timeout=\"200\"\r\n    hide-timeout=\"200\"\r\n    class=\"el-menu-vertical-demo\"\r\n    background-color=\"#334154\"\r\n    text-color=\"#c1cbd7\"\r\n    active-text-color=\"#fff\"\r\n    :class=\"{'navgtion_min': !isCollapse}\"\r\n    @open=\"handleOpen\"\r\n    @close=\"handleClose\"\r\n    @select=\"handleSelect\"\r\n    :collapse=\"isCollapse\"\r\n    :default-active=\"$store.getters.nowRoute\">\r\n  <div v-for=\"(submenu,index) in navgation\" :key=\"`nav_${index}`\">\r\n    <el-submenu v-if=\"submenu.children\" :index=\"submenu.index\">\r\n      <template slot=\"title\">\r\n        <Icon class=\"icon\" :type=\"`${submenu.icon}`\"></Icon>\r\n        <span class=\"title\" v-show=\"!isCollapse\">{{submenu.name}}</span>\r\n      </template>\r\n      <el-menu-item-group v-for=\"(item,idx) in submenu.children\" :key=\"`nav_${idx}`\">\r\n        <el-menu-item :index=\"item.routeName\">\r\n          <Icon class=\"icon\" :type=\"`${item.icon}`\"></Icon>\r\n          {{item.name}}\r\n        </el-menu-item>\r\n      </el-menu-item-group>\r\n    </el-submenu>\r\n    <el-menu-item v-else :index=\"submenu.routeName\">\r\n      <Icon class=\"icon\" :type=\"`${submenu.icon}`\"></Icon>\r\n      <span slot=\"title\">{{submenu.name}}</span>\r\n    </el-menu-item>\r\n  </div>\r\n  </el-menu>\r\n</nav>\r\n</template>\r\n\r\n<script>\r\nimport { getNav } from './navgation.js'\r\n// import { mapGetters } from 'vuex';\r\nimport { storageFetch, sessionFetch, userInfoKey } from \"^/storage\"\r\nimport axios from '^/axios'\r\n\r\nexport default {\r\n  data() {\r\n    const validatePassword = (rules, value, callback) => {\r\n    if (value == '') {\r\n      callback(new Error(\"请再次输入密码\"));\r\n      } else if (value !== this.form.newPassword) {\r\n        callback(new Error(\"两次输入的密码不一致\"))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      form: {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        checkPassword: ''\r\n      },\r\n      rules: {\r\n        oldPassword: [{require: true, message: '旧密码不能为空', trigger: 'blur'}],\r\n        newPassword: [{required: true, message: '新密码不能为空', trigger: 'blur'}],\r\n        checkPassword: [{validator: validatePassword, trigger: 'blur'}]\r\n      },\r\n      changePSW: false,\r\n      // isCollapse: false,\r\n      navgation: [],\r\n      logo: require(\"@/assets/logo.png\"),\r\n      defaultActive: 'route1'\r\n    }\r\n  },\r\n  computed: {\r\n    routePath() {\r\n      // console.log(this.$userInfo);\r\n      return this.$route.path.split(\"/\");\r\n    },\r\n    // ...mapGetters(['userInfo', 'nowRoute', 'isCollapse']),\r\n    userInfo() {\r\n      return this.$store.getters.userInfo\r\n    },\r\n    nowRoute() {\r\n      return this.$store.getters.nowRoute\r\n    },\r\n    isCollapse() {\r\n      return this.$store.getters.isCollapse\r\n    },\r\n    iconName() {\r\n      if(!this.isCollapse) {\r\n        return\r\n      }else return 'transiform'\r\n    }\r\n  },\r\n  methods: {\r\n    changePassword(name) {\r\n      this.$refs[name].validate((valid) => {\r\n        axios.post(`/user/updatePassword`, {\r\n        newPassword: this.form.newPassword,\r\n        password: this.form.oldPassword\r\n        }).then(response => {\r\n        if (response.success){\r\n          this.$Message.success(\"修改成功\")\r\n          this.changePSW = false;\r\n        }else{\r\n          this.$Message.warning(response.msg)\r\n        }\r\n        })\r\n      })\r\n    },\r\n    handleOpen(key, keyPath) {\r\n      // console.log(key, keyPath);\r\n    },\r\n    handleClose(key, keyPath) {\r\n      // console.log(key, keyPath);\r\n    },\r\n    handleZoom() {\r\n      this.$emit('zoom', this.isCollapse)\r\n    },\r\n    handleSelect(index, indexPath) {\r\n      if(indexPath.length>1) {\r\n        for(let item of this.navgation) {\r\n          if(item.index == indexPath[0]) {\r\n            for(let itemChild of item.children) {\r\n              if(itemChild.routeName == index) {\r\n                this.$store.commit('PUSH_tabs', {\r\n                  'name': index,\r\n                  'title': itemChild.name\r\n                })\r\n                break\r\n              }\r\n            }\r\n            break\r\n          }\r\n        }\r\n      }else {\r\n        for(let i = 0; i<this.navgation.length; i++) {\r\n          if(this.navgation[i].routeName == index) {\r\n            this.$store.commit('PUSH_tabs', {\r\n              'name': index,\r\n              'title': this.navgation[i].name\r\n            })\r\n            break\r\n          }\r\n        }\r\n      }\r\n      this.$store.commit('SET_nowRoute', index)\r\n      this.$emit('routeJump', index)\r\n    },\r\n    handelChangeDro(command) {\r\n      if(command == \"PSW\") {\r\n        this.changePSW = true\r\n      }\r\n    },\r\n    handleRefresh() {\r\n      this.$emit('on-refresh')\r\n    }\r\n  },\r\n  mounted () {\r\n    if(this.userInfo == '') {\r\n      this.$store.commit(\"SET_userInfo\", storageFetch(userInfoKey))\r\n    }\r\n    getNav().then( navgation => {\r\n      for(let item of this.userInfo.indexes) {\r\n        var _item = item.split('-')\r\n        if(_item.length == 1) {\r\n          this.navgation.push(navgation[_item[0]-1])\r\n        }else if(_item.length == 2) {\r\n          let flag = true\r\n          for(let i of this.navgation) {\r\n            if(i.index == _item[0]) {\r\n              i.children.push(navgation[_item[0]-1].children[_item[1]-1])\r\n              flag = false\r\n              break;\r\n            }\r\n          }\r\n          if(flag) {\r\n            let item_nav = {\r\n              name: navgation[_item[0]-1].name,\r\n              index: navgation[_item[0]-1].index,\r\n              icon: navgation[_item[0]-1].icon,\r\n              children: []\r\n            }\r\n            item_nav.children.push(navgation[_item[0]-1].children[_item[1]-1])\r\n            this.navgation.push(item_nav)\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../styles/index\";\r\n.nav{\r\n  background: #334154;\r\n  position: relative;\r\n  height: 100%\r\n  // border-right: 2px #dddddd solid;\r\n}\r\n.navgtion_min{\r\n}\r\n\r\n.logo{\r\n  transition: 0.2s;\r\n  height: 50px;\r\n  @include flex();\r\n  max-width: 180px;\r\n  font-size: $font-size-mid;\r\n  font-weight: $font-weight-large;\r\n  overflow: hidden;\r\n  img{\r\n    width: 30px;\r\n    height: 30px;\r\n  }\r\n  p{\r\n    transition: 0.2s;\r\n    // width: 100px;\r\n    color: #ffffff;\r\n    font-size: 16px;\r\n    @include ellipsis;\r\n  }\r\n  .keyan{\r\n    // position: absolute;\r\n    width: 0;\r\n    // transform: scale(0);\r\n    overflow: hidden;\r\n  }\r\n}\r\n.form{\r\n  @include flex;\r\n  flex-direction: column;\r\n  align-content: flex-start;\r\n  align-items: flex-start;\r\n  &-item{\r\n    width: 100%;\r\n    @include flex\r\n  }\r\n}\r\n\r\n.el-menu-vertical-demo{\r\n  position: relative;\r\n  height: 100%;\r\n  background: rgba(0,0,0,0);\r\n  border: #334154 0px solid;\r\n}\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 210px;\r\n}\r\n.icon{\r\n  font-size: 20px;\r\n  margin: 5px;\r\n}\r\n</style>\r\n"]}]}